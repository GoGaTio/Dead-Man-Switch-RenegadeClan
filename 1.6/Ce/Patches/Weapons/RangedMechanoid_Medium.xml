<?xml version="1.0" encoding="utf-8"?>
<Patch>

	<!-- ========== Tools ========== -->

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DMSRC_Gun_Luch"]/tools</xpath>
		<value>
			<tools>
				<li Class="CombatExtended.ToolCE">
					<label>stock</label>
					<capacities>
						<li>Blunt</li>
					</capacities>
					<power>10</power>
					<cooldownTime>2.44</cooldownTime>
					<armorPenetrationBlunt>3.5</armorPenetrationBlunt>
					<linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
				</li>
			</tools>
		</value>
	</Operation>

	<!-- ========== Beam Graser ========== -->

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DMSRC_Gun_Luch"]/statBases/RangedWeapon_Cooldown</xpath>
		<value>
			<RangedWeapon_Cooldown>0.56</RangedWeapon_Cooldown>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DMSRC_Gun_Luch"]/verbs/li/warmupTime</xpath>
		<value>
			<warmupTime>1.3</warmupTime>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DMSRC_Gun_Luch"]/verbs/li/range</xpath>
		<value>
			<range>40</range>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DMSRC_Gun_Luch"]/verbs/li/burstShotCount</xpath>
		<value>
			<burstShotCount>10</burstShotCount>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DMSRC_Gun_Luch"]/verbs/li/ticksBetweenBurstShots</xpath>
		<value>
			<ticksBetweenBurstShots>10</ticksBetweenBurstShots>
		</value>
	</Operation>

            <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMSRC_FirecrackerRifle</defName>
                <statBases>
                    <Mass>8.15</Mass>
                    <Bulk>10.85</Bulk>
                    <SwayFactor>1.57</SwayFactor>
                    <ShotSpread>0.09</ShotSpread>
                    <SightsEfficiency>1.2</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>DMSRC_Bullet_17x54mmFSR</defaultProjectile>
                    <warmupTime>1.1</warmupTime>
                    <range>45</range>
                    <burstShotCount>5</burstShotCount>
                    <ticksBetweenBurstShots>12</ticksBetweenBurstShots>
                    <soundCast>DMSRC_Shot_Firecracker</soundCast>
                    <soundCastTail>GunTail_Medium</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>1.77</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>15</magazineSize>
                    <reloadTime>3.2</reloadTime>
                    <ammoSet>DMSRC_AmmoSet_17x54mmFSR</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiUseBurstMode>TRUE</aiUseBurstMode>
                    <aiAimMode>AimedShot</aiAimMode>
                    <aimedBurstShotCount>3</aimedBurstShotCount>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_AR</li>
                </weaponTags>
            </Operation>

            <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMSRC_FirecrackerRifle_Launcher</defName>
                <statBases>
                    <Mass>9</Mass>
                    <Bulk>11.25</Bulk>
                    <SwayFactor>1.57</SwayFactor>
                    <ShotSpread>0.09</ShotSpread>
                    <SightsEfficiency>1.2</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>DMSRC_Bullet_17x54mmFSR</defaultProjectile>
                    <warmupTime>1.1</warmupTime>
                    <range>45</range>
                    <burstShotCount>5</burstShotCount>
                    <ticksBetweenBurstShots>12</ticksBetweenBurstShots>
                    <soundCast>DMSRC_Shot_Firecracker</soundCast>
                    <soundCastTail>GunTail_Medium</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>1.77</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>15</magazineSize>
                    <reloadTime>3.2</reloadTime>
                    <ammoSet>DMSRC_AmmoSet_17x54mmFSR</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiUseBurstMode>TRUE</aiUseBurstMode>
                    <aiAimMode>AimedShot</aiAimMode>
                    <aimedBurstShotCount>3</aimedBurstShotCount>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_AR</li>
                </weaponTags>
            </Operation>

<Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMSRC_BattleRifle_Launcher</defName>
                <statBases>
                    <Mass>13</Mass>
                    <Bulk>12.7</Bulk>
                    <SwayFactor>2.26</SwayFactor>
                    <ShotSpread>0.11</ShotSpread>
                    <SightsEfficiency>1.2</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.65</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_50BMG_FMJ</defaultProjectile>
                    <warmupTime>1.3</warmupTime>
                    <range>59</range>
                    <burstShotCount>4</burstShotCount>
				    <ticksBetweenBurstShots>8</ticksBetweenBurstShots>
                    <soundCast>Shot_AssaultRifle</soundCast>
                    <soundCastTail>GunTail_Medium</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>1.96</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>20</magazineSize>
                    <reloadTime>5.5</reloadTime>
                    <ammoSet>AmmoSet_50BMG</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiUseBurstMode>TRUE</aiUseBurstMode>
				    <aiAimMode>AimedShot</aiAimMode>
				    <aimedBurstShotCount>2</aimedBurstShotCount>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_AR</li>
                </weaponTags>
            </Operation>

<!--===== DMS_AssaultRifle =====-->
            <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMSRC_AssaultRifle_Launcher</defName>
                <statBases>
                    <Mass>8.55</Mass>
                    <Bulk>11.35</Bulk>
                    <SwayFactor>1.57</SwayFactor>
                    <ShotSpread>0.09</ShotSpread>
                    <SightsEfficiency>1.2</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_338Lapua_FMJ</defaultProjectile>
                    <warmupTime>1.1</warmupTime>
                    <range>55</range>
                    <burstShotCount>6</burstShotCount>
                    <ticksBetweenBurstShots>8</ticksBetweenBurstShots>
                    <soundCast>Shot_AssaultRifle</soundCast>
                    <soundCastTail>GunTail_Medium</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>1.77</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>30</magazineSize>
                    <reloadTime>4.2</reloadTime>
                    <ammoSet>AmmoSet_338Lapua</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiUseBurstMode>TRUE</aiUseBurstMode>
                    <aiAimMode>AimedShot</aiAimMode>
                    <aimedBurstShotCount>3</aimedBurstShotCount>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_AR</li>
                </weaponTags>
            </Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DMSRC_AssaultRifle_Launcher" or defName="DMSRC_BattleRifle_Launcher" or defName="DMSRC_FirecrackerRifle_Launcher"]/comps/li[@Class="CompProperties_EquippableAbilityReloadable"]</xpath>
		<value>
			<li Class="CombatExtended.CompProperties_UnderBarrel">
				<standardLabel>switch to rifle</standardLabel>
				<underBarrelLabel>switch to grenade launcher</underBarrelLabel>
				<propsUnderBarrel>
					<magazineSize>1</magazineSize>
					<reloadTime>2.5</reloadTime>
					<ammoSet>AmmoSet_40x46mmGrenade</ammoSet>
				</propsUnderBarrel>
				<verbPropsUnderBarrel>
					<recoilAmount>3</recoilAmount>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<defaultProjectile>Bullet_40x46mmGrenade_HE</defaultProjectile>
					<ai_AvoidFriendlyFireRadius>3</ai_AvoidFriendlyFireRadius>
					<warmupTime>1.1</warmupTime>
					<range>29.9</range>
					<ticksBetweenBurstShots>3</ticksBetweenBurstShots>
					<burstShotCount>1</burstShotCount>
					<soundCast>Shot_IncendiaryLauncher</soundCast>
             <soundCastTail>GunTail_Medium</soundCastTail>
					<muzzleFlashScale>9</muzzleFlashScale>
					<targetParams>
						<canTargetLocations>true</canTargetLocations>
					</targetParams>
				</verbPropsUnderBarrel>
				<propsFireModesUnderBarrel>
					<aiUseBurstMode>FALSE</aiUseBurstMode>
					<aiAimMode>AimedShot</aiAimMode>
					<aimedBurstShotCount>1</aimedBurstShotCount>
				</propsFireModesUnderBarrel>
			</li>
			<li>
				<compClass>CompEquippable</compClass>
			</li>
		</value>
	</Operation> 

</Patch>